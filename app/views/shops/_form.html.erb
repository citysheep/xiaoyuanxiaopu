<%= simple_nested_form_for @shop, :html => { :class => 'form-horizontal', :multipart => true } do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name, :label => '店铺大名', :hint => '给自己的小铺取一个好听的名字' %>
    <%= f.input :description, :as => :text, :input_html => { :class => "span4", :rows => "6" }, :label => '店铺描述', :hint => '简单描述一下自己的小铺' %>
    <% zones = Zone.all.collect {|z| [z.id, z.name]} %>
    <%= f.input :zone_id,
                :label => '店铺位置',
                :collection => zones,
                :label_method => :last,
                :value_method => :first,
                :checked => zones.first,
                :as => :radio,
                :hint => '方便你附近的同鞋们找到你的小铺'
    %>
  </div>
  <h3>小铺货物</h3>
  <table id="items">
  <%= f.simple_fields_for :items do |item_f| %>
    <hr />
    <%= item_f.input :name, :input_html => { :class => 'span4'}, :label => '货物名称' %>
    <%= item_f.input :price, :input_html => { :class => 'span4'}, :label => '价格' %>
    <%= item_f.input :category_id, :label => '分类', :collection => Category.all, :default => 1, :input_html => {:class=> 'select-block span3'} %>
    <%= item_f.input :photo, :input_html => { :class => 'span4'}, :label => '图片' %>
    <%= item_f.input :description, :as => :text, :input_html => { :class => 'span4', :rows => '6'}, :label => '描述' %>
    <%= item_f.link_to_remove '移除该货物'%>
  <% end %>
  </table>
  <p><%= f.link_to_add '再添加一个货物', :items, :data => { :target => '#items'} %></p>
  <div class="form-actions">
  <%= f.button :submit, :class => 'btn-primary', :value => '提交' %>
  </div>
<% end %>